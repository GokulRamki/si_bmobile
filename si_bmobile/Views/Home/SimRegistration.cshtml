@model si_bmobile.Models.sim_reg_model
@{
    ViewBag.Title = "SimRegistration";
}


<h2>Sim Registration</h2>

@using (Html.BeginForm("SimRegistration", "Home", FormMethod.Post, new { id = "frmSimReg", enctype = "multipart/form-data" }))
{
    <div class="main-regcontainer reg_dend">

        <div class="regsection-top-header reg_cells">IDENTIFICATION FORM for PREPAID MOBILE SERVICES</div>
        <div class="regsection-header reg_cells">
            <div class="reg-left">Section 1:</div>
            <div>Customer Details</div>
        </div>
        <div class="regsection-content reg_cells">
            <div class="divrow">
                <div class="reg-left">Name:</div>
                <div>@Html.EditorFor(m => m.cust.name)
                    @Html.ValidationMessageFor(m => m.cust.name)
                </div>
            </div>
            <div class="divrow">
                <div class="reg-left">Address:</div>
                <div>@Html.TextAreaFor(m => m.cust.address)
                    @Html.ValidationMessageFor(m => m.cust.address)
                </div>
            </div>
            <div class="divrow">
                <div class="reg-left">Email:</div>
                <div>@Html.EditorFor(m => m.cust.email)
                    @Html.ValidationMessageFor(m => m.cust.email)
                </div>
            </div>
            <div class="divrow">
                <div class="reg-left">Sex:</div>
                <div>
                    @Html.RadioButtonFor(m => m.cust.sex, "M")&nbsp;MALE&nbsp;
                    @Html.RadioButtonFor(m => m.cust.sex, "F")&nbsp;FEMALE
                    @Html.ValidationMessageFor(m => m.cust.sex)
                </div>
            </div>
            <div class="divrow">
                <div class="reg-left">Employed:</div>
                <div>
                    @Html.RadioButtonFor(m => m.cust.is_employed, true)&nbsp;YES&nbsp;
                    @Html.RadioButtonFor(m => m.cust.is_employed, false)&nbsp;NO
                    @Html.ValidationMessageFor(m => m.cust.is_employed)
                </div>
            </div>
            <div class="clear"></div>
        </div>

        <div class="regsection-header reg_cells">
            <div class="reg-left">Section 2:</div>
            <div>Customer Identification</div>
        </div>
        <div class="regsection-content reg_cells">
            <div>Individual    (please present two (2) of the following, tick the appropriate boxes and write identification number)</div>
            <div id="Identitycheckboxs">
                <div class="regsection2-div">
                    <div>
                        <div class="identity_left">Drivers License</div>
                        <div>@Html.CheckBoxFor(m => m.cust_iden.is_drv_lic, new { @name = "identitycheckboxs" })</div>
                    </div>
                    <div>
                        <div class="identity_left">License#:</div>
                        <div>@Html.EditorFor(m => m.cust_iden.drv_lic)
                            <span id="is_drv_validmessage">@Html.ValidationMessageFor(m => m.cust_iden.drv_lic)</span>
                        </div>
                    </div>
                </div>
                <div class="regsection2-div">
                    <div>
                        <div class="identity_left">Student ID</div>
                        <div>@Html.CheckBoxFor(m => m.cust_iden.is_student_id, new { @name = "identitycheckboxs" })</div>
                    </div>
                    <div>
                        <div class="identity_left">ID#:</div>
                        <div>@Html.EditorFor(m => m.cust_iden.student_id)
                            <span id="is_student_validmessage">@Html.ValidationMessageFor(m => m.cust_iden.student_id)</span>
                        </div>
                    </div>

                </div>
                <div class="regsection2-div">
                    <div>
                        <div class="identity_left">Employment/Work  ID</div>
                        <div>@Html.CheckBoxFor(m => m.cust_iden.is_emp_id, new { @name = "identitycheckboxs" })</div>
                    </div>
                    <div>
                        <div class="identity_left">ID#:</div>
                        <div>@Html.EditorFor(m => m.cust_iden.emp_id)
                            <span id="is_emp_validmessage">@Html.ValidationMessageFor(m => m.cust_iden.emp_id)</span>
                        </div>
                    </div>

                </div>
                <div class="regsection2-div">
                    <div>
                        <div class="identity_left">Nasfund ID</div>
                        <div>@Html.CheckBoxFor(m => m.cust_iden.is_nasfund_id, new { @name = "identitycheckboxs" })</div>
                    </div>
                    <div>
                        <div class="identity_left">ID#:</div>
                        <div>@Html.EditorFor(m => m.cust_iden.nasfund_id)
                            <span id="is_nasfund_validmessage">@Html.ValidationMessageFor(m => m.cust_iden.nasfund_id)</span>
                        </div>
                    </div>

                </div>
                <div class="regsection2-div">
                    <div>
                        <div class="identity_left">Nambawan Super ID</div>
                        <div>@Html.CheckBoxFor(m => m.cust_iden.is_nbw_super_id, new { @name = "identitycheckboxs" })</div>
                    </div>
                    <div>
                        <div class="identity_left">ID#:</div>
                        <div>@Html.EditorFor(m => m.cust_iden.nbw_super_id)
                            <span id="is_nbw_validmessage">@Html.ValidationMessageFor(m => m.cust_iden.nbw_super_id)</span>
                        </div>
                    </div>

                </div>
                <div class="regsection2-div">
                    <div>
                        <div class="identity_left">Other  ID</div>
                        <div>@Html.CheckBoxFor(m => m.cust_iden.is_other_id, new { @name = "identitycheckboxs" })</div>
                    </div>
                    <div>
                        <div class="identity_left">ID#:</div>
                        <div>@Html.EditorFor(m => m.cust_iden.other_id)
                            <span id="is_other_validmessage">@Html.ValidationMessageFor(m => m.cust_iden.other_id)</span>
                        </div>
                    </div>
                </div>
                <div id="valid-identity-checkbox"></div>
                <div class="clear"></div>
            </div>
            <div class="clear"></div>
        </div>
        <div class="regsection-header reg_cells">
            <div class="reg-left">Section 3:</div>
            <div>Purchase Details</div>
        </div>
        <div class="regsection-content reg_cells">
            <div style="margin-bottom: 10px;">
                <div class="reg-left">New Customer:&nbsp;&nbsp; @Html.RadioButtonFor(m => m.cust_purchase.cust_status, "New Customer")</div>
                <div class="reg-left">Existing Customer:&nbsp;&nbsp; @Html.RadioButtonFor(m => m.cust_purchase.cust_status, "Existing Customer")</div>
                <div>@Html.ValidationMessageFor(m => m.cust_purchase.cust_status)</div>
                <div class="clear"></div>
            </div>
            <div>
                <div class="regsection-subheader" style="margin-bottom: 10px;">
                    <div class="reg-left">Handset Model</div>
                    <div class="reg-left">Phone Number</div>
                    <div class="reg-left">IMEI Number</div>
                </div>
                <div>
                    <div class="reg-purchase-left">@Html.EditorFor(m => m.cust_purchase.cust_handset_model1)</div>
                    <div class="reg-purchase-left">@Html.EditorFor(m => m.cust_purchase.cust_mobile_no1)</div>
                    <div class="reg-purchase-left">@Html.EditorFor(m => m.cust_purchase.cust_imei_no1)
                        <span id="1stHandsetAddSpan">
                            <input type="button" value="Add New" id="1stAddBtn" style="background-color: #FF8C00; background-image: none;" />
                        </span>
                    </div>
                </div>
                <div>
                    <div class="reg-purchase-left">@Html.ValidationMessageFor(m => m.cust_purchase.cust_handset_model1) </div>
                    <div class="reg-purchase-left">@Html.ValidationMessageFor(m => m.cust_purchase.cust_mobile_no1)</div>
                    <div class="reg-purchase-left">@Html.ValidationMessageFor(m => m.cust_purchase.cust_imei_no1) </div>
                </div>
                <div id="2ndHandSetModels">
                    <div class="reg-purchase-left">@Html.EditorFor(m => m.cust_purchase.cust_handset_model2)</div>
                    <div class="reg-purchase-left">@Html.EditorFor(m => m.cust_purchase.cust_mobile_no2)</div>
                    <div class="reg-purchase-left">@Html.EditorFor(m => m.cust_purchase.cust_imei_no2)
                        <span id="2ndHandsetAddSpan">
                            <input type="button" value="Add New" id="2ndAddBtn" style="background-color: #FF8C00; background-image: none;" /></span>
                    </div>
                </div>
                <div id="3rdHandSetModels">
                    <div class="reg-purchase-left">@Html.EditorFor(m => m.cust_purchase.cust_handset_model3)</div>
                    <div class="reg-purchase-left">@Html.EditorFor(m => m.cust_purchase.cust_mobile_no3)</div>
                    <div class="reg-purchase-left">@Html.EditorFor(m => m.cust_purchase.cust_imei_no3)</div>
                </div>
                <div class="clear"></div>
            </div>
            <div class="clear"></div>
        </div>
        <div class="regsection-header reg_cells">
            <div class="reg-left">Section 3:</div>
            <div>Customer Acknowledgement</div>
        </div>
        <div class="regsection-content reg_cells">
            <div style="margin-bottom: 10px;">By signing this form I declare that all information in this application is true and correct.&nbsp&nbsp;&nbsp; @Html.CheckBoxFor(m => m.cust_ack.is_original_sign, true)</div>
            <div>
                <div class="reg-purchase-left">Date:</div>
                <div class="reg-purchase-left">@Html.TextBoxFor(m => m.cust_ack.cust_ack_date, "{0:MM/dd/yyyy}", new { @class = "date", style = "width:100px", @maxlength = "10" })
                    @Html.ValidationMessageFor(m => m.cust_ack.cust_ack_date)
                </div>
                <div class="reg-purchase-left">Signature:</div>
            </div>
            <div class="clear"></div>
        </div>
        <div class="regsection-header reg_cells">
            <div class="reg-left">Section 4:</div>
            <div>Retailer Use only (All boxes MUST be completed)</div>
        </div>
        <div class="regsection-content reg_cells" id="retaileronly">
            <div>I have sighted the original identification documents listed in section 2 and checked that:&nbsp&nbsp; @Html.CheckBox("is_retailer_sign")</div>
            <div>The name on the form matches the ID shown&nbsp @Html.CheckBox("is_match_id")</div>
            <div>The documents provided have not expired &nbsp&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; @Html.CheckBox("is_doc_expired")</div>
            <div style="margin-top: 10px;">
                <div class="reg-left">
                    Date: @Html.Editor("ret_modified_on")
                </div>
                <div class="reg-left">Sales Person: @Html.Editor("sale_person_name")</div>
                <div>Signature:</div>
                <div class="clear"></div>
            </div>
            <div style="text-align: center; margin-top: 10px;">
                <input type="submit" value="Submit" style="background-color: #d88202; background-image: none;" />
            </div>
            <div class="clear"></div>
        </div>

    </div>
}
@section Scripts {
    @Scripts.Render("~/bundles/jqueryval")
    <script src="@Url.Content("~/Scripts/MvcFoolproofValidation.min.js")" type="text/javascript"></script>
    <script src="@Url.Content("~/Scripts/MvcFoolproofJQueryValidation.min.js")" type="text/javascript"></script>

    <script type="text/javascript">

        $(document).ready(function () {
            $(".date").datepicker({
                dateFormat: "mm/dd/yy",
                changeMonth: true,
                changeYear: true,
                yearRange: "-104:+0"
            });

            $("#is_retailer_sign").attr('disabled', true);
            $("#is_match_id").attr('disabled', true);
            $("#is_doc_expired").attr('disabled', true);
            $("#ret_modified_on").attr('disabled', true);
            $("#sale_person_name").attr('disabled', true);
            $("#2ndHandSetModels").hide();
            $("#3rdHandSetModels").hide();

        });

        $("#1stAddBtn").click(function () {
            $("#1stHandsetAddSpan").hide();
            $("#2ndHandSetModels").show();
        });

        $("#2ndAddBtn").click(function () {
            $("#1stHandsetAddSpan").hide();
            $("#2ndHandsetAddSpan").hide();
            $("#3rdHandSetModels").show();
        });
        $("#JobContact_Phone_No1,#JobContact_Phone_No").keypress(function (e) {
            //if the letter is not digit then display error and don't type anything
            if (e.which != 8 && e.which != 0 && (e.which < 48 || e.which > 57)) {
                return false;
            }
        });


        $('form').on('submit', function () {
            var retvalue = false;

            retvalue = CheckIdentityIDs();

            return retvalue;
        });

        $("#cust_iden_is_drv_lic,#cust_iden_is_student_id,#cust_iden_is_emp_id,#cust_iden_is_nasfund_id,#cust_iden_is_nbw_super_id,#cust_iden_is_other_id").click(function () {
            CheckIdentityIDs();
        })

        function CheckIdentityIDs() {
            var retvalue = true;

            if ($("#Identitycheckboxs").find('input[type=checkbox]').filter(':checked').length < '2') {
                //$("#cust_iden_drv_lic").css({ 'border': '1px solid #f00', 'background-color': '#fee' });
                $("#valid-identity-checkbox").text("Please tick atleast 2 appropriate boxes and write identification number").addClass("fieldvalidation");
                retvalue = false;
            } else {
                $("#valid-identity-checkbox").html('');
            }

            if ($("#cust_iden_is_drv_lic").is(":Checked") == true && $("#cust_iden_drv_lic").val() == '') {
                $("#cust_iden_drv_lic").css({ 'border': '1px solid #f00', 'background-color': '#fee' });
                $("#is_drv_validmessage").text("This field is required").addClass("fieldvalidation");
                retvalue = false;
            } else {
                $("#is_drv_validmessage").html('');
                $("#cust_iden_drv_lic").removeAttr('style');
            }
            if ($("#cust_iden_is_student_id").is(":Checked") == true && $("#cust_iden_student_id").val() == '') {
                $("#cust_iden_student_id").css({ 'border': '1px solid #f00', 'background-color': '#fee' });
                $("#is_student_validmessage").text("This field is required").addClass("fieldvalidation");
                retvalue = false;
            } else {
                $("#is_student_validmessage").html('');
                $("#cust_iden_student_id").removeAttr('style');
            }

            if ($("#cust_iden_is_emp_id").is(":Checked") == true && $("#cust_iden_emp_id").val() == '') {
                $("#cust_iden_emp_id").css({ 'border': '1px solid #f00', 'background-color': '#fee' });
                $("#is_emp_validmessage").text("This field is required").addClass("fieldvalidation");
                retvalue = false;
            } else {
                $("#is_emp_validmessage").html('');
                $("#cust_iden_emp_id").removeAttr('style');
            }

            if ($("#cust_iden_is_nasfund_id").is(":Checked") == true && $("#cust_iden_nasfund_id").val() == '') {
                $("#cust_iden_nasfund_id").css({ 'border': '1px solid #f00', 'background-color': '#fee' });
                $("#is_nasfund_validmessage").text("This field is required").addClass("fieldvalidation");
                retvalue = false;
            } else {
                $("#is_nasfund_validmessage").html('');
                $("#cust_iden_nasfund_id").removeAttr('style');
            }

            if ($("#cust_iden_is_nbw_super_id").is(":Checked") == true && $("#cust_iden_nbw_super_id").val() == '') {
                $("#is_nbw_validmessage").text("This field is required").addClass("fieldvalidation");
                $("#cust_iden_nbw_super_id").css({ 'border': '1px solid #f00', 'background-color': '#fee' });
                retvalue = false;
            } else {
                $("#is_nbw_validmessage").html('');
                $("#cust_iden_nbw_super_id").removeAttr('style');
            }
            if ($("#cust_iden_is_other_id").is(":Checked") == true && $("#cust_iden_other_id").val() == '') {
                $("#is_other_validmessage").text("This field is required").addClass("fieldvalidation");
                $("#cust_iden_other_id").css({ 'border': '1px solid #f00', 'background-color': '#fee' });
                retvalue = false;
            } else {
                $("#is_other_validmessage").html('');
                $("#cust_iden_other_id").removeAttr('style');
            }

            return retvalue;
        }


    </script>
}

<style type="text/css">

    span.link {
        color: #f00;
        text-decoration: none;
    }

    span.field-validation-error {
        color: #f00;
    }

    span.link:hover {
        color: #f00;
        text-decoration: underline;
        cursor: pointer;
    }

    span {
        color: #f00;
    }

    .fieldvalidation {
        color: #f00;
    }
</style>
